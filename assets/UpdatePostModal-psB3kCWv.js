import{g as j,r as u,h as r,V as g,j as l,an as h,aw as P,ax as E,z as v}from"./index-DKkDCglF.js";import{h as y}from"./index-BxvkjLd9.js";const U=({isOpen:a,onClose:c,postToEdit:n,onPostUpdated:f})=>{const s=j(),[o,t]=u.useState({}),{currentUser:p}=r(e=>e.user),{loading:i,error:m}=r(e=>e.post),{categories:b}=r(e=>e.category);if(u.useEffect(()=>{a&&n&&(s(g()),t({...n,category:n.category?._id||""}))},[a,n,s]),!a)return null;const x=e=>{e.preventDefault(),s(E({postId:o._id,userId:p._id,formData:o})).unwrap().then(d=>{f(d),c()}).catch(d=>v.error(d))},N=e=>{t({...o,image:e})};return l.jsxDEV("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:l.jsxDEV("div",{onClick:e=>e.stopPropagation(),className:"relative w-full max-w-4xl h-[95vh] flex flex-col p-6 mx-4 bg-white dark:bg-slate-800 rounded-lg shadow-xl",dir:"rtl",children:[l.jsxDEV("h1",{className:"text-center text-3xl mb-7 dark:text-white font-semibold flex-shrink-0",children:"ویرایش مقاله"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/modals/UpdatePostModal.jsx",lineNumber:56,columnNumber:9},void 0),i||!o.title?l.jsxDEV("div",{className:"flex-1 flex justify-center items-center",children:l.jsxDEV("p",{children:"در حال بارگذاری اطلاعات مقاله..."},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/modals/UpdatePostModal.jsx",lineNumber:62,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/modals/UpdatePostModal.jsx",lineNumber:61,columnNumber:11},void 0):l.jsxDEV("form",{className:"flex flex-col justify-between gap-4 flex-1 overflow-y-auto pr-2",onSubmit:x,children:[l.jsxDEV("div",{className:"flex flex-col",children:[l.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-4",children:[l.jsxDEV("input",{type:"text",id:"title",required:!0,className:"flex-grow px-3 py-2 border dark:border-gray-500 dark:text-white outline-none rounded-lg",onChange:e=>t({...o,title:e.target.value}),value:o.title||""},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/modals/UpdatePostModal.jsx",lineNumber:71,columnNumber:17},void 0),l.jsxDEV("select",{id:"category",required:!0,value:o.category||"",onChange:e=>t({...o,category:e.target.value}),className:"px-3 py-2 border dark:border-gray-500 dark:bg-slate-700 dark:text-white outline-none rounded-lg",children:[l.jsxDEV("option",{value:"",disabled:!0,children:"انتخاب دسته‌بندی"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/modals/UpdatePostModal.jsx",lineNumber:90,columnNumber:19},void 0),b.map(e=>l.jsxDEV("option",{value:e._id,children:e.name},e._id,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/modals/UpdatePostModal.jsx",lineNumber:94,columnNumber:21},void 0))]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/modals/UpdatePostModal.jsx",lineNumber:81,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/modals/UpdatePostModal.jsx",lineNumber:70,columnNumber:15},void 0),l.jsxDEV(h,{onImageUploadSuccess:N,initialImage:o.image},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/modals/UpdatePostModal.jsx",lineNumber:100,columnNumber:15},void 0),l.jsxDEV("div",{children:l.jsxDEV(P,{theme:"snow",className:"bg-white min-h-[200px]",required:!0,onChange:e=>t({...o,content:e}),value:o.content||""},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/modals/UpdatePostModal.jsx",lineNumber:105,columnNumber:17},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/modals/UpdatePostModal.jsx",lineNumber:104,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/modals/UpdatePostModal.jsx",lineNumber:69,columnNumber:13},void 0),l.jsxDEV("div",{className:"flex flex-col gap-2",children:[l.jsxDEV("div",{className:"flex items-center justify-between p-4 border-t border-b dark:border-gray-700 mt-4",children:[l.jsxDEV("label",{htmlFor:"allowComments",className:"dark:text-white font-medium",children:"اجازه ثبت دیدگاه"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/modals/UpdatePostModal.jsx",lineNumber:118,columnNumber:17},void 0),l.jsxDEV("input",{type:"checkbox",id:"allowComments",checked:o.allowComments,onChange:e=>t({...o,allowComments:e.target.checked}),className:"w-5 h-5"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/modals/UpdatePostModal.jsx",lineNumber:124,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/modals/UpdatePostModal.jsx",lineNumber:117,columnNumber:15},void 0),l.jsxDEV("button",{type:"submit",disabled:i,className:"w-full py-3 bg-blue-600 text-white rounded-lg text-lg font-semibold hover:bg-blue-700 mt-auto",children:i?"در حال به‌روزرسانی...":"به‌روزرسانی پست"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/modals/UpdatePostModal.jsx",lineNumber:137,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/modals/UpdatePostModal.jsx",lineNumber:116,columnNumber:13},void 0),m&&l.jsxDEV("div",{className:"mt-2 p-3 bg-red-100 text-red-700 rounded-lg text-sm",children:m},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/modals/UpdatePostModal.jsx",lineNumber:146,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/modals/UpdatePostModal.jsx",lineNumber:65,columnNumber:11},void 0),l.jsxDEV("button",{onClick:c,className:"absolute top-4 left-4 dark:text-white cursor-pointer",children:l.jsxDEV(y,{size:25},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/modals/UpdatePostModal.jsx",lineNumber:156,columnNumber:11},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/modals/UpdatePostModal.jsx",lineNumber:152,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/modals/UpdatePostModal.jsx",lineNumber:51,columnNumber:7},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/modals/UpdatePostModal.jsx",lineNumber:50,columnNumber:5},void 0)};export{U as default};
