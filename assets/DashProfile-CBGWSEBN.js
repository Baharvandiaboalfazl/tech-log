import{r as c,am as E,j as e,m as u,E as y,an as v,g as P,f as D,h as w,z as t,ao as C,ap as V}from"./index-DKkDCglF.js";import{C as U}from"./ClickAnimation-DfGYmuqO.js";import{M as k}from"./Modal-B1N0vJbz.js";const I={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{delay:.2,duration:.3}},exit:{opacity:0,scale:.95,transition:{duration:.1}}},S=({currentUser:s,imgUploader:l})=>{const o=c.useRef(null),[r,d]=c.useState(!1);return E(o,()=>d(!1)),e.jsxDEV(u.div,{ref:o,layout:!0,onClick:()=>!r&&d(!0),className:"absolute cursor-pointer bg-white dark:bg-slate-800 shadow-2xl overflow-hidden",style:{width:r?384:150,height:r?256:150,borderRadius:r?32:9999},transition:{type:"spring",stiffness:200,damping:20},children:e.jsxDEV(y,{mode:"wait",children:r?e.jsxDEV(u.div,{variants:I,initial:"hidden",animate:"visible",exit:"exit",className:"flex items-center w-full h-full",children:e.jsxDEV(v,{onImageUploadSuccess:l},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/ProfilePicture.jsx",lineNumber:54,columnNumber:13},void 0)},"uploader",!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/ProfilePicture.jsx",lineNumber:46,columnNumber:11},void 0):e.jsxDEV(u.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1,transition:{delay:.2}},exit:{opacity:0,scale:.8},className:"w-full h-full",children:e.jsxDEV("img",{src:s?.avatar,alt:"avatar",className:"w-full h-full object-cover"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/ProfilePicture.jsx",lineNumber:68,columnNumber:13},void 0)},"avatar",!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/ProfilePicture.jsx",lineNumber:57,columnNumber:11},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/ProfilePicture.jsx",lineNumber:44,columnNumber:7},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/ProfilePicture.jsx",lineNumber:32,columnNumber:5},void 0)},O=({currentUser:s,formData:l,handleChange:o,formErrors:r,imgUploader:d})=>e.jsxDEV("div",{className:"w-full p-6 bg-white dark:bg-slate-800 rounded-xl shadow-lg",children:[e.jsxDEV("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"اطلاعات کاربری"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserInfo.jsx",lineNumber:13,columnNumber:7},void 0),e.jsxDEV("div",{className:"w-full my-5 border-b border-gray-300 dark:border-gray-600"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserInfo.jsx",lineNumber:16,columnNumber:7},void 0),e.jsxDEV("div",{className:"grid grid-cols-3 gap-8 items-center",children:[e.jsxDEV("div",{className:"col-span-1 grid grid-rows-5 h-full gap-2",children:[e.jsxDEV("p",{className:"row-span-1 dark:text-white text-center",children:"برای تغییر عکس پروفایل روی پروفایل کلیک کنید."},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserInfo.jsx",lineNumber:19,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex justify-center items-end row-span-3",children:e.jsxDEV(S,{currentUser:s,imgUploader:d},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserInfo.jsx",lineNumber:23,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserInfo.jsx",lineNumber:22,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex justify-center row-span-1",children:e.jsxDEV(U,{},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserInfo.jsx",lineNumber:29,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserInfo.jsx",lineNumber:28,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserInfo.jsx",lineNumber:18,columnNumber:9},void 0),e.jsxDEV("div",{className:"col-span-2 flex flex-col gap-4",children:[e.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("label",{className:"block mb-1 dark:text-gray-100",children:"نام کاربری"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserInfo.jsx",lineNumber:35,columnNumber:15},void 0),e.jsxDEV("input",{id:"username",type:"text",value:l.username||"",onChange:o,className:"w-full h-10 p-2 border rounded-md dark:text-gray-300 outline-blue-500 transition-colors"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserInfo.jsx",lineNumber:38,columnNumber:15},void 0),r.username&&e.jsxDEV("p",{className:"text-red-500 text-sm mt-1",children:r.username},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserInfo.jsx",lineNumber:46,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserInfo.jsx",lineNumber:34,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("label",{className:"block mb-1 dark:text-gray-100",children:"ایمیل"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserInfo.jsx",lineNumber:52,columnNumber:15},void 0),e.jsxDEV("input",{id:"email",type:"email",value:l.email||"",disabled:!0,className:"w-full h-10 p-2 border rounded-md bg-gray-100 dark:bg-slate-500 "},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserInfo.jsx",lineNumber:53,columnNumber:15},void 0),r.email&&e.jsxDEV("p",{className:"text-red-500 text-sm mt-1",children:r.email},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserInfo.jsx",lineNumber:61,columnNumber:17},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserInfo.jsx",lineNumber:51,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserInfo.jsx",lineNumber:33,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block mb-1 dark:text-gray-100",children:"بیوگرافی"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserInfo.jsx",lineNumber:66,columnNumber:13},void 0),e.jsxDEV("textarea",{id:"bio",value:l.bio||"",onChange:o,maxLength:200,className:"w-full h-28 p-2 border rounded-md dark:text-gray-300"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserInfo.jsx",lineNumber:67,columnNumber:13},void 0),r.bio&&e.jsxDEV("p",{className:"text-red-500 text-sm mt-1",children:r.bio},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserInfo.jsx",lineNumber:75,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-gray-500 text-xs",children:[200-(l.bio||"").length," کاراکتر باقی مانده"]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserInfo.jsx",lineNumber:77,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserInfo.jsx",lineNumber:65,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserInfo.jsx",lineNumber:32,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserInfo.jsx",lineNumber:17,columnNumber:7},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserInfo.jsx",lineNumber:12,columnNumber:5},void 0),R=({currentUser:s,formData:l,handleSocialChange:o})=>e.jsxDEV(e.Fragment,{children:(s.role==="admin"||s.role==="editor")&&e.jsxDEV("div",{className:"w-full p-6 bg-white dark:bg-slate-800 rounded-xl shadow-lg",children:[e.jsxDEV("h2",{className:"text-2xl font-bold dark:text-white",children:"شبکه‌های اجتماعی"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserSocials.jsx",lineNumber:6,columnNumber:11},void 0),e.jsxDEV("div",{className:"w-full border-b my-5 border-gray-300 dark:border-gray-600"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserSocials.jsx",lineNumber:9,columnNumber:11},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block mb-1 dark:text-gray-100",children:"توییتر"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserSocials.jsx",lineNumber:12,columnNumber:15},void 0),e.jsxDEV("input",{id:"twitter",type:"text",value:l.socials?.twitter||"",onChange:o,placeholder:"لینک پروفایل توییتر",className:"w-full h-10 p-2 border rounded-md dark:text-gray-300"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserSocials.jsx",lineNumber:13,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserSocials.jsx",lineNumber:11,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block mb-1 dark:text-gray-100",children:"اینستاگرام"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserSocials.jsx",lineNumber:23,columnNumber:15},void 0),e.jsxDEV("input",{id:"instagram",type:"text",value:l.socials?.instagram||"",onChange:o,placeholder:"لینک پروفایل اینستاگرام",className:"w-full h-10 p-2 border rounded-md dark:text-gray-300"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserSocials.jsx",lineNumber:26,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserSocials.jsx",lineNumber:22,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block mb-1 dark:text-gray-100",children:"تلگرام"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserSocials.jsx",lineNumber:36,columnNumber:15},void 0),e.jsxDEV("input",{id:"telegram",type:"text",value:l.socials?.telegram||"",onChange:o,placeholder:"آی‌دی یا لینک تلگرام",className:"w-full h-10 p-2 border rounded-md dark:text-gray-300"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserSocials.jsx",lineNumber:37,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserSocials.jsx",lineNumber:35,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserSocials.jsx",lineNumber:10,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserSocials.jsx",lineNumber:5,columnNumber:9},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserSocials.jsx",lineNumber:3,columnNumber:5},void 0),F=({handleChange:s,formErrors:l})=>e.jsxDEV("div",{className:"w-full p-6 bg-white dark:bg-slate-800 rounded-xl shadow-lg",children:[e.jsxDEV("h2",{className:"text-2xl font-bold dark:text-white",children:"امنیت"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserPassword.jsx",lineNumber:4,columnNumber:7},void 0),e.jsxDEV("div",{className:"w-full border-b my-5 border-gray-300 dark:border-gray-600"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserPassword.jsx",lineNumber:5,columnNumber:7},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxDEV("input",{id:"currentPassword",type:"password",placeholder:"رمز عبور فعلی",onChange:s,className:"w-full h-10 p-2 border rounded-md dark:text-gray-300"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserPassword.jsx",lineNumber:7,columnNumber:9},void 0),e.jsxDEV("input",{id:"newPassword",type:"password",placeholder:"رمز عبور جدید",onChange:s,className:"w-full h-10 p-2 border rounded-md dark:text-gray-300"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserPassword.jsx",lineNumber:14,columnNumber:9},void 0),e.jsxDEV("input",{id:"confirmPassword",type:"password",placeholder:"تکرار رمز جدید",onChange:s,className:"w-full h-10 p-2 border rounded-md dark:text-gray-300"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserPassword.jsx",lineNumber:21,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserPassword.jsx",lineNumber:6,columnNumber:7},void 0),l.password&&e.jsxDEV("p",{className:"text-red-500 text-sm mt-2",children:l.password},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserPassword.jsx",lineNumber:30,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserPassword.jsx",lineNumber:3,columnNumber:5},void 0),M=({showDeleteModal:s,setShowDeleteModal:l,handleDeleteUser:o})=>e.jsxDEV("div",{className:"w-full p-6 bg-white dark:bg-slate-800 rounded-xl shadow-lg",children:[e.jsxDEV("div",{className:"flex justify-between items-center",children:[e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-bold dark:text-white",children:"حذف حساب کاربری"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserDelete.jsx",lineNumber:12,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:"این عمل غیرقابل بازگشت است."},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserDelete.jsx",lineNumber:13,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserDelete.jsx",lineNumber:11,columnNumber:9},void 0),e.jsxDEV("button",{type:"button",onClick:()=>l(!0),className:"px-5 py-2 font-semibold bg-red-600 hover:bg-red-500 text-white rounded-lg cursor-pointer",children:"حذف حساب"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserDelete.jsx",lineNumber:17,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserDelete.jsx",lineNumber:10,columnNumber:7},void 0),e.jsxDEV(k,{isOpen:s,onClose:()=>l(!1),onConfirm:o,title:"حذف حساب کاربری",children:e.jsxDEV("p",{children:"آیا از حذف حساب کاربری خود اطمینان دارید؟"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserDelete.jsx",lineNumber:32,columnNumber:9},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserDelete.jsx",lineNumber:26,columnNumber:7},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/profile/UserDelete.jsx",lineNumber:9,columnNumber:5},void 0),q=()=>{const s=P(),l=D(),[o,r]=c.useState({}),[d,f]=c.useState(!1),[b,m]=c.useState({}),{currentUser:i,loading:p,error:z}=w(n=>n.user);c.useEffect(()=>{i&&r({username:i.username,email:i.email,avatar:i.avatar||"",bio:i.bio||"",currentPassword:"",newPassword:"",confirmPassword:"",socials:i.socials||{twitter:"",instagram:"",telegram:""}})},[i]);const N=n=>{r({...o,[n.target.id]:n.target.value})},x=n=>{r({...o,avatar:n})},j=n=>{r({...o,socials:{...o.socials,[n.target.id]:n.target.value}})},h=n=>{if(n.preventDefault(),m({}),o.newPassword&&o.newPassword!==o.confirmPassword){const a="رمز عبور جدید و تکرار آن یکسان نیستند.";m({password:a}),t.error(a);return}s(C({userId:i._id,formData:o})).unwrap().then(a=>{t.success("پروفایل شما با موفقیت آپدیت شد"),console.log(a)}).catch(a=>{a.type==="validation"?m(a.errors):t.error(a.message||a)})},g=()=>{f(!1),s(V(i._id)).unwrap().then(()=>{l("/")}).catch(n=>{t.error(n)})};return e.jsxDEV("form",{onSubmit:h,className:"py-10 max-w-4xl mx-auto flex flex-col gap-8",children:[e.jsxDEV(O,{currentUser:i,formData:o,handleChange:N,formErrors:b,imgUploader:x},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/DashProfile.jsx",lineNumber:105,columnNumber:7},void 0),e.jsxDEV(R,{currentUser:i,formData:o,handleSocialChange:j},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/DashProfile.jsx",lineNumber:113,columnNumber:7},void 0),e.jsxDEV(F,{handleChange:N,formErrors:b},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/DashProfile.jsx",lineNumber:119,columnNumber:7},void 0),e.jsxDEV(M,{showDeleteModal:d,setShowDeleteModal:f,handleDeleteUser:g},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/DashProfile.jsx",lineNumber:121,columnNumber:7},void 0),e.jsxDEV("button",{type:"submit",disabled:p,className:"w-full py-3 text-lg font-semibold bg-blue-600 hover:bg-blue-500 text-white rounded-lg cursor-pointer",children:p?"در حال ذخیره...":"ذخیره تغییرات"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/DashProfile.jsx",lineNumber:127,columnNumber:7},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/DashProfile.jsx",lineNumber:101,columnNumber:5},void 0)};export{q as default};
