import{j as e,g as D,r as i,L as r,ap as _,aq as O,ar as R,z as f,as as $,f as z,o as A,h as b,W as B,V as q,m as H,at as Q,au as W}from"./index-DK77TLof.js";import{u as G}from"./useDebounce-BI5Hl_Y6.js";import{P as J}from"./PaginationButtons-D7LSnhQh.js";import{T as K}from"./TableBodySkeleton -CN3EfB_O.js";import{M as X}from"./Modal-B_6UmWSA.js";import Y from"./UpdatePostModal-D9wlwtv3.js";import"./index-BZO-Ymht.js";const Z=({index:a})=>{const l=a;return e.jsxDEV("div",{className:"bg-gray-50 dark:bg-slate-900 min-h-screen p-4 sm:p-6 lg:p-8",dir:"rtl",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto",children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-6",children:[e.jsxDEV("div",{className:"h-8 w-48 bg-gray-300 dark:bg-slate-700 rounded-md animate-pulse"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:11,columnNumber:11},void 0),e.jsxDEV("div",{className:"h-10 w-36 bg-gray-300 dark:bg-slate-700 rounded-lg animate-pulse"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:12,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:10,columnNumber:9},void 0),e.jsxDEV("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm overflow-hidden",children:[e.jsxDEV("div",{className:"p-6 border-b dark:border-slate-700",children:e.jsxDEV("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[e.jsxDEV("div",{className:"w-full sm:flex-grow h-10.5 bg-gray-300 dark:bg-slate-700 rounded-lg animate-pulse"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:18,columnNumber:15},void 0),e.jsxDEV("div",{className:"w-full sm:w-40 h-10.5 bg-gray-300 dark:bg-slate-700 rounded-lg animate-pulse"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:19,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:17,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:16,columnNumber:11},void 0),e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"w-full text-sm text-right",children:[e.jsxDEV("thead",{className:"bg-gray-50 dark:bg-slate-700/50 text-xs uppercase",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"p-4",children:e.jsxDEV("div",{className:"h-4 w-24 bg-gray-300 dark:bg-slate-600 rounded animate-pulse"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:28,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:27,columnNumber:19},void 0),e.jsxDEV("th",{className:"p-4",children:e.jsxDEV("div",{className:"h-4 w-16 bg-gray-300 dark:bg-slate-600 rounded animate-pulse"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:31,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:30,columnNumber:19},void 0),e.jsxDEV("th",{className:"p-4",children:e.jsxDEV("div",{className:"h-4 w-32 bg-gray-300 dark:bg-slate-600 rounded animate-pulse"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:34,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:33,columnNumber:19},void 0),e.jsxDEV("th",{className:"p-4",children:e.jsxDEV("div",{className:"h-4 w-20 bg-gray-300 dark:bg-slate-600 rounded animate-pulse"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:37,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:36,columnNumber:19},void 0),e.jsxDEV("th",{className:"p-4",children:e.jsxDEV("div",{className:"h-4 w-24 bg-gray-300 dark:bg-slate-600 rounded animate-pulse"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:40,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:39,columnNumber:19},void 0),e.jsxDEV("th",{className:"p-4 text-center",children:e.jsxDEV("div",{className:"h-4 w-20 mx-auto bg-gray-300 dark:bg-slate-600 rounded animate-pulse"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:43,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:42,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:26,columnNumber:17},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:25,columnNumber:15},void 0),e.jsxDEV("tbody",{className:"divide-y dark:divide-slate-700",children:Array.from({length:l}).map((t,n)=>e.jsxDEV("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50",children:[e.jsxDEV("td",{className:"p-4",children:e.jsxDEV("div",{className:"h-4 w-24 bg-gray-300 dark:bg-slate-700 rounded animate-pulse"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:54,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:53,columnNumber:21},void 0),e.jsxDEV("td",{className:"p-4",children:e.jsxDEV("div",{className:"w-24 h-12 bg-gray-300 dark:bg-slate-700 rounded-md animate-pulse"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:57,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:56,columnNumber:21},void 0),e.jsxDEV("td",{className:"p-4",children:e.jsxDEV("div",{className:"h-4 w-40 bg-gray-300 dark:bg-slate-700 rounded animate-pulse"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:60,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:59,columnNumber:21},void 0),e.jsxDEV("td",{className:"p-4",children:e.jsxDEV("div",{className:"h-4 w-28 bg-gray-300 dark:bg-slate-700 rounded animate-pulse"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:63,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:62,columnNumber:21},void 0),e.jsxDEV("td",{className:"p-4",children:e.jsxDEV("div",{className:"h-4 w-20 bg-gray-300 dark:bg-slate-700 rounded animate-pulse"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:66,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:65,columnNumber:21},void 0),e.jsxDEV("td",{className:"p-4 whitespace-nowrap",children:e.jsxDEV("div",{className:"flex items-center justify-center gap-4",children:[e.jsxDEV("div",{className:"h-6 w-16 bg-gray-300 dark:bg-slate-700 rounded animate-pulse"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:70,columnNumber:25},void 0),e.jsxDEV("div",{className:"h-6 w-16 bg-gray-300 dark:bg-slate-700 rounded animate-pulse"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:71,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:69,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:68,columnNumber:21},void 0)]},n,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:49,columnNumber:19},void 0))},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:47,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:24,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:23,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:15,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex justify-center items-center gap-4 mt-6",children:[e.jsxDEV("div",{className:"h-10 w-20 bg-gray-300 dark:bg-slate-700 rounded-lg animate-pulse"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:82,columnNumber:11},void 0),e.jsxDEV("div",{className:"h-5 w-40 bg-gray-300 dark:bg-slate-700 rounded-md animate-pulse"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:83,columnNumber:11},void 0),e.jsxDEV("div",{className:"h-10 w-20 bg-gray-300 dark:bg-slate-700 rounded-lg animate-pulse"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:84,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:81,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:9,columnNumber:7},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/skeleton/DashPostsSkeleton .jsx",lineNumber:5,columnNumber:5},void 0)},ee=({posts:a,currentUser:l,postLoading:t,rowsIndex:n,onEditClick:N})=>{const p=D(),[c,d]=i.useState(!1),[m,j]=i.useState(""),h=()=>{d(!1),p(R({postId:m,userId:l._id})).unwrap().then(f.success("مقاله با موفقیت حذف شد")).catch(s=>f.error(s))};return e.jsxDEV("div",{className:"overflow-x-auto",children:[a.length>0?e.jsxDEV("table",{className:"w-full text-sm text-right",children:[e.jsxDEV("thead",{className:"bg-gray-50 dark:bg-slate-700/50 text-xs text-gray-500 uppercase",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"p-4 font-medium",children:"تاریخ بروزرسانی"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:36,columnNumber:15},void 0),e.jsxDEV("th",{className:"p-4 font-medium",children:"تصویر"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:37,columnNumber:15},void 0),e.jsxDEV("th",{className:"p-4 font-medium",children:"عنوان"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:38,columnNumber:15},void 0),l.role==="admin"&&e.jsxDEV("th",{className:"p-4 font-medium",children:"نویسنده"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:40,columnNumber:17},void 0),e.jsxDEV("th",{className:"p-4 font-medium",children:"دسته‌بندی"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:42,columnNumber:15},void 0),e.jsxDEV("th",{className:"p-4 font-medium text-center",children:"عملیات"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:43,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:35,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:34,columnNumber:11},void 0)," ",t?e.jsxDEV(K,{rows:n},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:47,columnNumber:13},void 0):e.jsxDEV("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700 max-md:divide-y-0",children:a.map(s=>e.jsxDEV("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50",children:[e.jsxDEV("td",{className:"p-4 whitespace-nowrap dark:text-white",children:new Date(s.updatedAt).toLocaleDateString("fa-IR")},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:55,columnNumber:19},void 0),e.jsxDEV("td",{className:"p-4",children:e.jsxDEV(r,{to:`/post/${s.slug}`,children:e.jsxDEV("img",{src:s.image,alt:s.title,className:"w-24 h-12 object-cover rounded-md"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:60,columnNumber:23},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:59,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:58,columnNumber:19},void 0),e.jsxDEV("td",{className:"p-4 font-medium dark:text-slate-200 hover:underline",children:e.jsxDEV(r,{to:`/post/${s.slug}`,children:s.title},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:68,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:67,columnNumber:19},void 0),l.role==="admin"&&e.jsxDEV("td",{className:"p-4",children:s.userId?e.jsxDEV(r,{to:`/dashboard?tab=users&userId=${s.userId?._id}`,className:"hover:underline text-blue-500",children:s.userId.username},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:73,columnNumber:25},void 0):e.jsxDEV("span",{children:"-"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:80,columnNumber:25},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:71,columnNumber:21},void 0),e.jsxDEV("td",{className:"p-4",children:e.jsxDEV(r,{to:`/categories?cat=${s.category?.slug}`,className:"hover:underline text-orange-500",children:s.category?.name},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:85,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:84,columnNumber:19},void 0),e.jsxDEV("td",{className:"p-4 whitespace-nowrap",children:e.jsxDEV("div",{className:"flex items-center justify-center gap-4",children:[e.jsxDEV("button",{onClick:()=>{d(!0),j(s._id)},className:"text-red-500 hover:text-red-700 flex items-center gap-1 cursor-pointer",children:[e.jsxDEV(_,{},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:101,columnNumber:25},void 0),e.jsxDEV("span",{children:"حذف"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:102,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:94,columnNumber:23},void 0),e.jsxDEV(r,{to:`/update-post/${s._id}`,state:{backgroundLocation:location},className:"text-teal-500 hover:text-teal-700 flex items-center gap-1",onClick:()=>N(s),children:[e.jsxDEV(O,{},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:110,columnNumber:25},void 0),e.jsxDEV("span",{children:"ویرایش"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:111,columnNumber:25},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:104,columnNumber:23},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:93,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:92,columnNumber:19},void 0)]},s._id,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:51,columnNumber:17},void 0))},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:49,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:33,columnNumber:9},void 0):e.jsxDEV("p",{className:"text-center p-8 text-gray-500",children:"هیچ مقاله ای یافت نشد."},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:121,columnNumber:9},void 0),e.jsxDEV(X,{isOpen:c,onClose:()=>d(!1),onConfirm:h,title:"حذف پست",children:"آیا از حذف این پست اطمینان دارید؟"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:123,columnNumber:7},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsTable.jsx",lineNumber:31,columnNumber:5},void 0)},se=({filters:a,handleFilterChange:l,categories:t})=>e.jsxDEV("div",{className:"p-6 border-b dark:border-slate-700",children:e.jsxDEV("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[e.jsxDEV("div",{className:"relative w-full sm:flex-grow",children:[e.jsxDEV($,{size:20,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsFilter.jsx",lineNumber:8,columnNumber:11},void 0),e.jsxDEV("input",{type:"text",id:"searchTerm",placeholder:"جستجو در عنوان یا نویسنده...",value:a.searchTerm,onChange:l,className:"h-10.5 w-full !px-10 border dark:text-gray-400 outline-none rounded-lg text-md"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsFilter.jsx",lineNumber:12,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsFilter.jsx",lineNumber:7,columnNumber:9},void 0),e.jsxDEV("select",{id:"category",value:a.category,onChange:l,className:"w-full sm:w-auto p-2 border rounded-lg text-sm dark:text-gray-400",children:[e.jsxDEV("option",{value:"",children:"همه دسته‌بندی‌ها"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsFilter.jsx",lineNumber:27,columnNumber:11},void 0),t.map(n=>e.jsxDEV("option",{value:n.slug,children:n.name},n._id,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsFilter.jsx",lineNumber:29,columnNumber:13},void 0))]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsFilter.jsx",lineNumber:21,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsFilter.jsx",lineNumber:6,columnNumber:7},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/posts/PostsFilter.jsx",lineNumber:5,columnNumber:5},void 0),ce=()=>{const a=D(),l=z(),t=A(),[n,N]=i.useState({searchTerm:"",category:""}),[p,c]=i.useState(!1),[d,m]=i.useState(!1),[j,h]=i.useState(null),{currentUser:s,loading:v}=b(o=>o.user),{posts:y,loading:P,totalPosts:E}=b(o=>o.post),{categories:k,loading:C}=b(o=>o.category),{settings:V,loading:w}=b(o=>o.settings),S=o=>{c(!1),f.success("پست یا موفقیت ایجاد شد.")},T=o=>{h(o),m(!0)},I=()=>{m(!1),f.success("پست با موفقیت آپدیت شد.")},x=G(n.searchTerm,500);i.useEffect(()=>{const o=new URLSearchParams(t.search);o.set("tab","posts"),x?o.set("searchTerm",x):o.delete("searchTerm"),n.category?o.set("category",n.category):o.delete("category"),l(`?${o.toString()}`)},[x,n.category,l]),i.useEffect(()=>{const o=new URLSearchParams(t.search);!s.role==="admin"&&o.set("userId",s._id);const u=o.toString();(s.role==="admin"||s.role==="editor")&&a(B(u)).unwrap(),a(q())},[t.search,s,a]);const F=o=>{N({...n,[o.target.id]:o.target.value})},g=V.rowsIndex||9,L=o=>{const u=new URLSearchParams(t.search);u.set("startIndex",o),l(`?${u.toString()}`)},M=new URLSearchParams(t.search),U=parseInt(M.get("startIndex"))||0;return!s||s.role!=="admin"&&s.role!=="editor"?e.jsxDEV("p",{className:"p-6",children:"شما اجازه دسترسی به این صفحه را ندارید."},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/DashPosts.jsx",lineNumber:100,columnNumber:12},void 0):v&&P&&C&&w?e.jsxDEV(Z,{index:g},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/DashPosts.jsx",lineNumber:104,columnNumber:12},void 0):e.jsxDEV("div",{className:"px-4 py-10",children:[e.jsxDEV("div",{className:"max-w-7xl mx-auto",children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-6",children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["مدیریت مقاله ها (",E,")"]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/DashPosts.jsx",lineNumber:111,columnNumber:11},void 0),e.jsxDEV(H.button,{type:"submit",className:"",whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxDEV(r,{to:"/create-post",state:{backgroundLocation:t},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700",onClick:()=>c(!0),children:[e.jsxDEV(Q,{},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/DashPosts.jsx",lineNumber:126,columnNumber:15},void 0),"ایجاد مقاله جدید"]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/DashPosts.jsx",lineNumber:120,columnNumber:13},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/DashPosts.jsx",lineNumber:114,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/DashPosts.jsx",lineNumber:110,columnNumber:9},void 0),e.jsxDEV("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm overflow-hidden",children:[e.jsxDEV(se,{categories:k,handleFilterChange:F,filters:n},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/DashPosts.jsx",lineNumber:133,columnNumber:11},void 0),e.jsxDEV(ee,{posts:y,currentUser:s,postLoading:P,rowsIndex:g,onEditClick:T},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/DashPosts.jsx",lineNumber:139,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/DashPosts.jsx",lineNumber:132,columnNumber:9},void 0),e.jsxDEV(J,{handlePageChange:L,totalDataNumber:E,rowsIndex:g,startIndex:U},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/DashPosts.jsx",lineNumber:147,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/DashPosts.jsx",lineNumber:109,columnNumber:7},void 0),e.jsxDEV(Y,{isOpen:d,onClose:()=>m(!1),postToEdit:j,onPostUpdated:I},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/DashPosts.jsx",lineNumber:155,columnNumber:7},void 0),e.jsxDEV(W,{isOpen:p,onClose:()=>c(!1),onPostCreated:S},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/DashPosts.jsx",lineNumber:161,columnNumber:7},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/dashboard/DashPosts.jsx",lineNumber:108,columnNumber:5},void 0)};export{ce as default};
