import{r as m,j as e,L as h,F as v,d as V,e as b,h as P,g as C,f as D,k as S,l as w,z as u,n as U,v as k}from"./index-CaBtqeQH.js";import{S as z}from"./SideImage-CASqXpCu.js";const F=({loading:o,handleSignupSubmit:c,handleChange:t,fieldErrors:i})=>{const[l,r]=m.useState(!1),s=()=>{r(!l)};return e.jsxDEV("div",{className:"flex items-center justify-center lg:w-1/2 h-screen bg-gray-50 dark:bg-slate-800",children:e.jsxDEV("div",{className:"w-3/5 mx-auto",children:e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-3xl lg:text-4xl xl:text-5xl font-bold text-black dark:text-white",children:"ساخت حساب کاربری"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/SignUp.jsx",lineNumber:17,columnNumber:11},void 0),e.jsxDEV("p",{className:"lg:text-xl mt-2 text-gray-300 dark:text-gray-400",children:["قبلا ثبت نام کرده اید؟",e.jsxDEV(h,{to:"/sign-in",className:"text-blue-600 hover:underline font-semibold mr-1",children:"ورود"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/SignUp.jsx",lineNumber:22,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/SignUp.jsx",lineNumber:20,columnNumber:11},void 0),e.jsxDEV("form",{className:"flex flex-col mt-14",onSubmit:c,children:[e.jsxDEV("div",{className:"flex flex-col gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("input",{id:"username",type:"text",placeholder:"نام کاربری",onChange:t,className:"w-full h-14 rounded-lg pr-4 outline-none border border-gray-900 dark:border-gray-400 focus:ring-blue-500 dark:text-white"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/SignUp.jsx",lineNumber:32,columnNumber:17},void 0),i.username&&e.jsxDEV("p",{className:"text-red-500 text-sm mt-1",children:i.username},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/SignUp.jsx",lineNumber:40,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/SignUp.jsx",lineNumber:31,columnNumber:15},void 0),e.jsxDEV("div",{children:[e.jsxDEV("input",{id:"email",type:"text",placeholder:"ایمیل",onChange:t,className:"w-full h-14 rounded-lg pr-4 outline-none border border-gray-900 dark:border-gray-400 focus:ring-blue-500 dark:text-white"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/SignUp.jsx",lineNumber:46,columnNumber:17},void 0),i.email&&e.jsxDEV("p",{className:"text-red-500 text-sm mt-1",children:i.email},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/SignUp.jsx",lineNumber:54,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/SignUp.jsx",lineNumber:45,columnNumber:15},void 0),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("input",{id:"password",type:l?"text":"password",placeholder:"رمز عبور",onChange:t,className:"w-full h-14 rounded-lg pr-4 outline-none border border-gray-900 dark:border-gray-400 focus:ring-blue-500 dark:text-white"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/SignUp.jsx",lineNumber:60,columnNumber:17},void 0),e.jsxDEV("button",{type:"button",onClick:s,className:"absolute left-4 top-4 text-gray-400 focus:outline-none",children:l?e.jsxDEV(v,{size:25},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/SignUp.jsx",lineNumber:73,columnNumber:21},void 0):e.jsxDEV(V,{size:25},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/SignUp.jsx",lineNumber:75,columnNumber:21},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/SignUp.jsx",lineNumber:67,columnNumber:17},void 0),i.password&&e.jsxDEV("p",{className:"text-red-500 text-sm mt-1",children:i.password},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/SignUp.jsx",lineNumber:79,columnNumber:19},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/SignUp.jsx",lineNumber:59,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/SignUp.jsx",lineNumber:30,columnNumber:13},void 0),e.jsxDEV("button",{type:"submit",disabled:o,className:"flex items-center justify-center w-full h-14 mt-6 text-xl lg:text-2xl font-bold rounded-lg text-white bg-blue-600 hover:bg-blue-500 transition-opacity disabled:opacity-70 hover:scale-105 active:scale-95",children:o?e.jsxDEV(b,{},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/SignUp.jsx",lineNumber:90,columnNumber:26},void 0):"ادامه"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/SignUp.jsx",lineNumber:85,columnNumber:13},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/SignUp.jsx",lineNumber:29,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/SignUp.jsx",lineNumber:16,columnNumber:9},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/SignUp.jsx",lineNumber:15,columnNumber:7},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/SignUp.jsx",lineNumber:14,columnNumber:5},void 0)},L=({formData:o,handleVerifySubmit:c,handleChange:t,handleResendOtp:i,otpError:l,loading:r,cooldown:s})=>e.jsxDEV("div",{className:"flex items-center justify-center lg:w-1/2 h-screen bg-gray-50 dark:bg-slate-800",children:e.jsxDEV("div",{className:"w-3/5 mx-auto",children:[e.jsxDEV("p",{className:"text-4xl font-bold text-gray-800 text-center",children:"تأیید ایمیل"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/VerifyEmail.jsx",lineNumber:15,columnNumber:9},void 0),e.jsxDEV("p",{className:"text-lg mt-2 text-gray-600 dark:text-white text-center",children:["کد ۶ رقمی ارسال شده به",e.jsxDEV("span",{className:"px-1 font-semibold dark:text-zinc-500",children:o.email},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/VerifyEmail.jsx",lineNumber:20,columnNumber:11},void 0),"را وارد کنید."]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/VerifyEmail.jsx",lineNumber:18,columnNumber:9},void 0),e.jsxDEV("p",{className:"text-sm mt-2 text-gray-400 font-semibold text-center",children:"در صورت پیدا نشدن ایمیل پوشه اسپم رو چک کنید."},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/VerifyEmail.jsx",lineNumber:25,columnNumber:9},void 0),e.jsxDEV("form",{className:"flex flex-col mt-10",onSubmit:c,children:[e.jsxDEV("div",{className:"flex flex-col gap-4",children:[e.jsxDEV("input",{id:"otp",type:"text",placeholder:"------",onChange:t,required:!0,maxLength:6,className:"w-full h-14 text-center border dark:border-gray-400 dark:text-white rounded-md outline-none"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/VerifyEmail.jsx",lineNumber:30,columnNumber:13},void 0),l&&e.jsxDEV("p",{className:"text-red-500 text-sm mt-1 text-center",children:l},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/VerifyEmail.jsx",lineNumber:40,columnNumber:15},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/VerifyEmail.jsx",lineNumber:29,columnNumber:11},void 0),e.jsxDEV("button",{type:"submit",disabled:r,className:"flex items-center justify-center h-14 mt-8 text-xl font-bold text-white bg-blue-500 hover:scale-105 active:scale-95 rounded-lg",children:r?e.jsxDEV(b,{},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/VerifyEmail.jsx",lineNumber:50,columnNumber:24},void 0):"تأیید و ثبت نام"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/VerifyEmail.jsx",lineNumber:45,columnNumber:11},void 0),e.jsxDEV("div",{className:"text-center mt-4 text-sm",children:s>0?e.jsxDEV("p",{className:"text-gray-500",children:["لطفاً ",s," ثانیه دیگر صبر کنید."]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/VerifyEmail.jsx",lineNumber:54,columnNumber:15},void 0):e.jsxDEV("button",{type:"button",onClick:i,disabled:r,className:"text-blue-600 hover:underline cursor-pointer",children:"ارسال مجدد کد"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/VerifyEmail.jsx",lineNumber:58,columnNumber:15},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/VerifyEmail.jsx",lineNumber:52,columnNumber:11},void 0),e.jsxDEV("button",{type:"button",onClick:()=>{setStep(1),dispatch(clearError())},className:"text-sm text-center w-full mt-4 text-gray-300 hover:underline cursor-pointer",children:"بازگشت به مرحله قبل"},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/VerifyEmail.jsx",lineNumber:68,columnNumber:11},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/VerifyEmail.jsx",lineNumber:28,columnNumber:9},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/VerifyEmail.jsx",lineNumber:14,columnNumber:7},void 0)},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/components/login-form/VerifyEmail.jsx",lineNumber:13,columnNumber:5},void 0),R=()=>{const[o,c]=m.useState({}),[t,i]=m.useState(1),[l,r]=m.useState(0),{loading:s,error:f}=P(n=>n.user),a=C(),g=D();m.useEffect(()=>{a(S())},[a]),m.useEffect(()=>{let n;return l>0&&(n=setTimeout(()=>r(l-1),1e3)),()=>clearTimeout(n)},[l]);const p=n=>{c({...o,[n.target.id]:n.target.value.trim()})},x=n=>{n.preventDefault(),a(w(o)).unwrap().then(()=>{i(2),r(60)}).catch(d=>{d.type==="general"&&u.error(d.message)})},N=()=>{l>0||a(U(o.email)).unwrap().then(()=>r(60),u.success("کد تایید مجدد برای شما ارسال شد.")).catch(n=>u.error(n))},j=n=>{n.preventDefault(),a(k({email:o.email,otp:o.otp})).unwrap().then(()=>setTimeout(()=>g("/sign-in"),2e3),u.success("ثبت نام شما با موفقیت انجام شد.")).catch(d=>u.error(d))},E=f?.type==="validation"?f.errors:{},y=f?.type==="otp"?f.message:null;return e.jsxDEV("div",{className:"flex flex-col lg:flex-row min-h-screen bg-gray-50",children:[t===1&&e.jsxDEV(F,{loading:s,handleSignupSubmit:x,handleChange:p,fieldErrors:E},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/pages/SignUpPage.jsx",lineNumber:83,columnNumber:9},void 0),t===2&&e.jsxDEV(L,{formData:o,handleVerifySubmit:j,handleChange:p,handleResendOtp:N,otpError:y,loading:s,cooldown:l},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/pages/SignUpPage.jsx",lineNumber:91,columnNumber:9},void 0),e.jsxDEV(z,{},void 0,!1,{fileName:"E:/Project/final-blog - Copy/client/src/pages/SignUpPage.jsx",lineNumber:101,columnNumber:7},void 0)]},void 0,!0,{fileName:"E:/Project/final-blog - Copy/client/src/pages/SignUpPage.jsx",lineNumber:81,columnNumber:5},void 0)};export{R as default};
